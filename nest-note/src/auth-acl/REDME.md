# 权限控制 ACL

访问控制表（Access Control List）：记录每个用户有什么权限的方式。

需求：有两个用户 xxx 和 yyy，xxx 分配有 aaa 的所有访问权限，yyy 分配有 bbb 的所有访问权限。彼此不能访问对方的接口。

实现：建立用户表、权限表、用户-权限的中间表，使用 session 存储已登录的用户，通过 Guard 来判断 session 里有没有该用户来判断用户有无登录过。通过 handler 上用 SetMetadata 声明该接口需要什么权限，再从数据库中查出来的当前用户的权限做对比，有相应权限才会放行。使用 redis 来缓存用户有哪些权限，避免频繁查数据库。
