# æŽ¥å£å®žçŽ°å¤šç‰ˆæœ¬å…±å­˜

ä¸åŒç‰ˆæœ¬å·è°ƒç”¨ä¸åŒçš„æŽ¥å£

ðŸŒ°ï¼špublic\versions.html
æ–¹æ¡ˆ 1ï¼šsrc\swagger\versions\versions.controller.ts 
æ–¹æ¡ˆ 2ï¼šsrc\swagger\versions\versions-v2.controller.ts

ä¸€èˆ¬è¿™æ ·å®žçŽ°ï¼š
æœ‰ä¸€ä¸ª Controller æ ‡è®°ä¸º VERSION_NEUTRALï¼Œå…¶ä»–ç‰ˆæœ¬çš„æŽ¥å£æ”¾åœ¨å¦å¤–ä¸€ä¸ªå•ç‹¬ Controller é‡Œã€‚æˆ–è€…ç›´æŽ¥æ ¹æ® url æ˜¾æ€§æ ‡è¯†ã€‚

åŒä¸€ä¸ª controller æ–‡ä»¶å®šä¹‰çš„ handlerï¼Œmodule æ–‡ä»¶å®šä¹‰çš„ controller ä¹Ÿéœ€è¦æ³¨æ„é¡ºåºï¼Œå‰é¢çš„ controller å…ˆç”Ÿæ•ˆã€‚

## æŒ‡å®šç‰ˆæœ¬çš„æ–¹å¼

URIã€HEADERã€MEDIA_TYPEã€CUSTOM

```ts :main.ts
// HEADER æ˜¯æŒ‡ä½¿ç”¨è‡ªå®šä¹‰çš„ header æºå¸¦ç‰ˆæœ¬å·
app.enableVersioning({
  type: VersioningType.HEADER,
  header: 'version',
});

// MEDIA_TYPE æ˜¯æŒ‡åœ¨ accept çš„ header é‡Œæºå¸¦ç‰ˆæœ¬å·ï¼Œæ ‡è¯†ä¸º vv=
app.enableVersioning({
  type: VersioningType.MEDIA_TYPE,
  key: 'vv='
})

// ä¹Ÿå¯ä»¥ç”¨ URI çš„æ–¹å¼ï¼Œä½†æ˜¯è¿™ç§æ–¹å¼ä¸æ”¯æŒ VERSION_NEUTRALï¼Œéœ€è¦æŒ‡å®šæ˜Žç¡®çš„ç‰ˆæœ¬å·
app.enableVersioning({
  type: VersioningType.URI
})

// è‡ªå®šä¹‰
const extractor = (request: Request)=> {
  if(request.headers['disable-custom']) {
    return '';
  }
  return request.url.includes('versions') ? '2' : '1';
}
app.enableVersioning({
  type: VersioningType.CUSTOM,
  extractor
})
```
